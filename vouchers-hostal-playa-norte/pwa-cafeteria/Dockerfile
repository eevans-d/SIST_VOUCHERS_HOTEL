# ============================================\n# STAGE 1: Builder\n# ============================================ \nFROM node:18-alpine AS builder\n\nWORKDIR /app\n\n# Copiar archivos de dependencias\nCOPY package*.json ./
\n# Instalar dependencias\nRUN npm ci\n\n# Copiar código fuente\nCOPY . .\n\n# Build de producción\nRUN npm run build\n\n# ============================================ \n# STAGE 2: Production (nginx)\n# ============================================ \nFROM nginx:alpine\n\n# Copiar build desde builder\nCOPY --from=builder /app/dist /usr/share/nginx/html\n\n# Configuración nginx personalizada\nCOPY nginx.conf /etc/nginx/conf.d/default.conf\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=3s \n  CMD wget --quiet --tries=1 --spider http://localhost/ || exit 1\n\nEXPOSE 80\n\nCMD ["nginx", "-g", "daemon off;"]