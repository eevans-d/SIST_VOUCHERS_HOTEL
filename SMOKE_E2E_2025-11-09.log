[smoke] seed: Sembrando BD en ./db/e2e.db 
[seed-e2e] Usando base de datos: ./db/e2e.db 
[seed-e2e] Usuario admin creado: {
  id: '0d566410-789e-4f97-9d27-be8cd349ba9f',
  email: 'admin@hotel.com'
}
[seed-e2e] Seed E2E completado 
[smoke] server: Iniciando backend (modo e2e)â€¦ 
[backend] [32minfo[39m: ğŸš€ Iniciando aplicaciÃ³n en modo: e2e {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… Base de datos conectada: ./db/e2e.db {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… Servicios inicializados correctamente {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… HTTPS enforcement activado {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… Helmet security headers configurados {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… Helmet mejorado con CSP dinÃ¡mico {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… CORS dinÃ¡mico configurado por entorno {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… MÃ©tricas Prometheus registradas {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: âœ… Rate limiting global activado (100 req/15min) {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[backend] [32minfo[39m: 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ğŸ›ï¸  SISTEMA VOUCHERS HOTEL              â•‘
â•‘   Backend API - Constitucional            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  ğŸŒ URL: http://localhost:3100
  ğŸ“¡ Environment: e2e
  ğŸ—„ï¸  Database: ./db/e2e.db

  Rutas disponibles:
  - GET  /live               (Liveness)
  - GET  /health             (Estado de la API)
  - GET  /ready              (Readiness)
  - POST /api/auth/register  (Registrar usuario)
  - POST /api/auth/login     (AutenticaciÃ³n)
  - POST /api/auth/logout    (Cerrar sesiÃ³n)
  - GET  /api/auth/me        (Mi perfil)

  - GET    /api/stays              (Listar estadÃ­as)
  - GET    /api/stays/:id          (Obtener estadÃ­a)
  - POST   /api/stays              (Crear estadÃ­a)
  - PUT    /api/stays/:id          (Actualizar)
  - DELETE /api/stays/:id          (Cancelar)
  - POST   /api/stays/:id/activate (Activar)
  - POST   /api/stays/:id/complete (Completar)
  - GET    /api/stays/occupancy/:hotelCode (OcupaciÃ³n)
  - GET    /api/stays/checkpoints/:hotelCode (Check-in/out hoy)

  DocumentaciÃ³n: docs/API.md
   {"service":"voucher-system","timestamp":"2025-11-09 08:58:07"}
[smoke] health: OK 
[smoke] auth/login: RESP {
  status: 200,
  data: {
    success: true,
    data: {
      user: [Object],
      accessToken: 'e2e-access-token',
      refreshToken: 'e2e-refresh-token',
      expiresIn: 604800
    },
    user: {
      id: 'user-e2e',
      email: 'admin@hotel.com',
      firstName: 'E2E',
      lastName: 'User',
      role: 'admin'
    },
    accessToken: 'e2e-access-token',
    refreshToken: 'e2e-refresh-token',
    expiresIn: 604800
  }
}
[smoke] auth/login: OK e2e-access-token
[smoke] auth/refresh: OK 
[smoke] GET /api/vouchers: OK (count=0) 
[smoke] GET /api/vouchers/stats/overview: OK 
[smoke] resultado: SMOKE E2E OK 
[smoke] server: Deteniendo backendâ€¦ 
[backend] [32minfo[39m: SIGTERM recibido. Cerrando gracefully... {"service":"voucher-system","timestamp":"2025-11-09 08:58:08"}
[backend] [32minfo[39m: âœ… Servidor cerrado {"service":"voucher-system","timestamp":"2025-11-09 08:58:08"}
